import{_ as b,o as l,c as d,d as t,F as p,f as g,g as _,t as r,b as C,h as m,v as I}from"./index-16e104e8.js";const{VITE_APP_URL:i,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"cream21",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},v={data(){return{cart:[]}},methods:{getCarts(){this.$http.get(`${i}/v2/api/${u}/cart`).then(e=>{console.log("取得購物車",e.data.data),this.cart=e.data.data}).catch(e=>{console.log(e.data)})},updateCartItem(e){const s={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${i}/v2/api/${u}/cart/${e.id}`,{data:s}).then(n=>{console.log("更新購物車",n.data),this.getCarts(),this.loadingItem=""}).catch(n=>{console.log(n.data.message)})},deleteCartItem(e){this.loadingItem=e.id,this.$http.delete(`${i}/v2/api/${u}/cart/${e.id}`).then(s=>{console.log("刪除購物車品項",s.data),this.getCarts(),this.loadingItem=""}).catch(s=>{console.log(s.data.message)})},deleteCarts(){this.$http.delete(`${i}/v2/api/${u}/carts`).then(e=>{console.log(e.data.message),this.getCarts()}).catch(e=>{console.log(e.data)})}},mounted(){this.getCarts()}},f={class:"text-end"},y={class:"table align-middle"},$=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),P=["onClick","disabled"],V=["disabled"],k={class:"input-group input-group-sm"},E=["onUpdate:modelValue","onChange","disabled"],x=["value"],A={class:"text-end"},T=t("td",{colspan:"3",class:"text-end"},"總計",-1),D={class:"text-end"};function U(e,s,n,q,h,c){return l(),d(p,null,[t("div",f,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:s[0]||(s[0]=(...a)=>c.deleteCarts&&c.deleteCarts(...a))}," 清空購物車 ")]),t("table",y,[$,t("tbody",null,[h.cart.carts?(l(!0),d(p,{key:0},g(h.cart.carts,a=>(l(),d("tr",{key:a.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:o=>c.deleteCartItem(a),disabled:a.id===e.loadingItem},[a.id===e.loadingItem?(l(),d("i",{key:0,class:"fas fa-spinner fa-pulse",disabled:a.id===e.loadingItem},null,8,V)):_("",!0),C(" x ")],8,P)]),t("td",null,r(a.product.title)+" ",1),t("td",null,[t("div",k,[m(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":o=>a.qty=o,onChange:o=>c.updateCartItem(a),disabled:a.id===e.loadingItem},[(l(),d(p,null,g(20,o=>t("option",{value:o,key:o+"12345"},r(o),9,x)),64))],40,E),[[I,a.qty]])])]),t("td",A,r(a.product.price),1)]))),128)):_("",!0)]),t("tfoot",null,[t("tr",null,[T,t("td",D,r(h.cart.total),1)])])])],64)}const L=b(v,[["render",U]]);export{L as default};
