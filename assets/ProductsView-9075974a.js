import{_ as p,e as g,r as m,o,c as n,d as t,F as b,f as k,n as P,t as l,a as y,w as f,b as c,g as v}from"./index-968b1c29.js";const{VITE_APP_URL:r,VITE_APP_PATH:_}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"cream21",BASE_URL:"/vite_week_6/",MODE:"production",DEV:!1,PROD:!0},I={data(){return{products:[],loadingItem:""}},methods:{getProducts(){this.$http.get(`${r}/v2/api/${_}/products/all`).then(s=>{this.products=s.data.products,console.log("產品列表",this.products)}).catch(s=>{alert(s.data)})},addToCart(s){const d={product_id:s,qty:1};this.loadingItem=s,this.$http.post(`${r}/v2/api/${_}/cart`,{data:d}).then(a=>{console.log("加入購物車:",a.data),this.cartStatus=!0,this.loadingItem=""}).catch(a=>{console.log(a.data.message)})}},components:{RouterLink:g},mounted(){this.getProducts()}},V={class:"table align-middle"},T=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),x={style:{width:"200px"}},E={key:0,class:"h5"},$={key:1},A={class:"h6"},C={class:"h5"},w=["onClick","disabled"],L={key:0,class:"fas fa-spinner fa-pulse"};function R(s,d,a,B,i,h){const u=m("router-link");return o(),n("table",V,[T,t("tbody",null,[(o(!0),n(b,null,k(i.products,e=>(o(),n("tr",{key:e.id},[t("td",x,[t("div",{style:P([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,l(e.title),1),t("td",null,[e.price===e.origin_price?(o(),n("div",E,l(e.price)+" 元 ",1)):(o(),n("div",$,[t("del",A,"原價 "+l(e.origin_price)+" 元",1),t("div",C,"現在只要 "+l(e.price)+" 元",1)]))]),t("td",null,[y(u,{to:`./product/${e.id}`,class:"btn btn-outline-secondary",disabled:e.id===i.loadingItem},{default:f(()=>[c("查看詳細內頁")]),_:2},1032,["to","disabled"]),t("button",{type:"button",class:"btn btn-primary",onClick:D=>h.addToCart(e.id),disabled:e.id===i.loadingItem},[i.loadingItem===e.id?(o(),n("i",L)):v("",!0),c(" 加入購物車 ")],8,w)])]))),128))])])}const S=p(I,[["render",R]]);export{S as default};
